<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>ExternalInterface Test 1</title>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script>
		<script type="text/javascript">
			var flashvars = {};
			var params = {};
			params.allowscriptaccess = "always";
			params.allownetworking = "all";
			params.allowfullscreen = "true";
			var attributes = {};
			attributes.id = "MediaPlayer";
			swfobject.embedSWF("MediaPlayer.swf", "flashDiv", "320", "240", "9.0.0", false, flashvars, params, attributes);
		</script>
		<script type="text/javascript">
			window.onload = init;
			
			function init()
			{
				flashMovie("MediaPlayer").addEventListener("onStateChange", "onPlayerStateChange");
				flashMovie("MediaPlayer").addEventListener("onLoading", "onPlayerLoading");
				flashMovie("MediaPlayer").addEventListener("onError", "onPlayerError");
			}
		
			function flashMovie(movieName)
			{
				return document.getElementById(movieName);
         	}

			function onPlayerStateChange(eventid, eventvalue)
			{
				logger = document.getElementById("logger");
				
				switch(eventid)
				{
					case 1: // play begun
				  		logger.value += "onStateChange - play \n";
				  		break;
					case 2: // paused
				  		logger.value += "onStateChange - pause \n";
				  		break;
					case 3: // stopped
					  	logger.value += "onStateChange - stop \n";
					  	break;
					case 4: // ended
						logger.value += "onStateChange - ended \n";
						break;
					case 5: // ended
						logger.value += "onStateChange - time " + eventvalue + "\n";
						break;
					default:
						logger.value += eventid;
						break;
				}
			}
			
			function onPlayerLoading(value)
			{
				logger = document.getElementById("logger");
				
				switch(value)
				{
					case 1: // player loaded
						logger.value += "onLoading - player loaded \n";
						
				  		break;
					case 2: // metadata loaded
				  		logger.value += "onLoading - metadata loaded \n";
				  		break;
				  	case 3: // metadata loaded
				  		logger.value += "onLoading - can play \n";
				  		break;
				  	default:
				  		logger.value += "onLoading - " + value + "\n";
				}
			}
			
			function onPlayerError(value)
			{
				logger = document.getElementById("logger");
				
				switch(value)
				{
					case 1: // player loaded
						logger.value += "onError - failed to load file \n";
						
				  		break;
					case 2: // metadata loaded
				  		logger.value += "onError - wrong url or invalid file \n";
				  		break;
				}
			}

			function sendToFlash(action)
			{
				value = ' ';
				flashMovie("MediaPlayer").sendToFlash(action, value);
			}
			
			function loadMovie()
			{
				url = document.getElementById("txtUrl").value;
				startAt = document.getElementById("txtVideoStart").value;
				value = url + "," + startAt;
				flashMovie("MediaPlayer").sendToFlash("load", value);
			}
			
			function setVolume()
			{
				value = document.getElementById("txtSetVolume").value;
				flashMovie("MediaPlayer").sendToFlash("setVolume", value);
			}
			
			function getVolume()
			{
				txtBox = document.getElementById("txtReadVolume");
				txtBox.value = flashMovie("MediaPlayer").getVolume();
			}
			
			function getCurrentTime()
			{
				txtBox = document.getElementById("txtTime");
				txtBox.value = flashMovie("MediaPlayer").sendToFlash('getCurrentTime','');
			}
			
			function getStartTime()
			{
				txtBox = document.getElementById("txtTime");
				txtBox.value = flashMovie("MediaPlayer").sendToFlash('getStartTime','');
			}
			
			function getEndTime()
			{
				txtBox = document.getElementById("txtTime");
				txtBox.value = flashMovie("MediaPlayer").sendToFlash('getEndTime','');
			}

		</script>
		<style type="text/css">
			body
			{
				font-family: Arial;
				font-size: 10pt;
			}
			textarea
			{
				height: 200px;
				width: 300px;
			}
			
			h1
			{
				font-size: 12pt;
				margin: 0;
			}
			div
			{
				margin-bottom: 20px;
			}
			
			#videoDiv
			{
				border: black 5px solid;
			}
		</style>
	</head>

	<body>
		<table>
			<tr>
				<td>
					<div id="videoDiv">
						<div id="flashDiv">
							<p>This will get replaced with a SWF. If not you need to update your Flash Player.</p>
						</div>
					</div>
				</td>
				<td valign="top">
					<textarea name="output" id="logger"></textarea>
				<tr>
			</table>
				</td>
			</tr>
		</table>
		
		<div id="testArea">
        	<form name="myForm">
        	<div>
				<h1>Load video</h1>
				
				<a onclick="loadMovie()" href="javascript:void(0);">load</a>
				<br/>
				Url <input type="text" id="txtUrl" value="http://mediapm.edgesuite.net/ovp/content/demo/video/elephants_dream/elephants_dream_768x428_24.0fps_608kbps.mp4" style="width:400px;"/>
				<br/>
				Start playing at <input type="text" id="txtVideoStart" value="0"/>
			</div>
			
			<div>
				<h1>Player control</h1>
				<a onclick="sendToFlash('play')" href="javascript:void(0);">play</a> |
				<a onclick="sendToFlash('pause')" href="javascript:void(0);">pause</a> |
				<a onclick="sendToFlash('resume')" href="javascript:void(0);">resume</a> 
				<a onclick="sendToFlash('stop')" href="javascript:void(0);">stop</a> 
			</div>
			<div>
				<h1>Volume</h1>
				<a onclick="getVolume()" href="javascript:void(0);">get value</a> 
				<input readonly="readonly" type ="text" id="txtReadVolume" value="1" style="background-color:#cccccc;"/> 
				<br/>
				<a onclick="setVolume()" href="javascript:void(0);">change</a> [0:1] 
				<input type ="text" id="txtSetVolume" /> 
			</div>
			<div>
				<h1>Time</h1>
				<a onclick="getStartTime()" href="javascript:void(0);">get start time</a> | 
				<a onclick="getEndTime()" href="javascript:void(0);">get end time</a> | 
				<a onclick="getCurrentTime()" href="javascript:void(0);">get current time</a> 
				<input readonly="readonly" type ="text" id="txtTime" value="1" style="background-color:#cccccc;"/> 
			
			</div>
			
		</div>
	</body>
</html>
